{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Issues - Chalkstone Council</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
   <!-- Navigation Bar -->
   <div class="navbar">
    <a href="{% url 'home' %}" class="logo">Chalkstone Council</a>
    <a href="{% url 'report_issue' %}">Report Issue</a>
    <a href="{% url 'view_issues' %}">View Issues</a>
    {% if user.is_staff %}
        <a href="{% url 'issue_management' %}">Issue Management</a>
    {% endif %}

    <div class="user-section">
        {% if user.is_authenticated %}
            <span class="user-info">{{ user.username }}</span>
            <a href="{% url 'logout' %}" class="login-link">Logout</a>
        {% else %}
            <a href="{% url 'login' %}" class="login-link">Login</a>
        {% endif %}
    </div>
</div>

    <!-- Main Content Area -->
    <div class="content">
        <h1>View Reported Issues</h1>
        <p>Below is the list of issues that have been reported to the Chalkstone Council. You can view the details of each issue and its current status.</p>

        <!-- Issues List -->
        <div class="issues-container">
            {% if issues %}
                <table class="issues-table">
                    <thead>
                        <tr>
                            <th>Issue Title</th>
                            <th>Description</th>
                            <th>Location</th>
                            <th>Status</th>
                            <th>Image</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for issue in issues %}
                            <tr>
                                <td>{{ issue.title }}</td>
                                <td>{{ issue.description }}</td>
                                <td>{{ issue.location }}</td>
                                <td>{{ issue.status }}</td>
                                <td>
                                    <!-- Display image if it exists -->
                                    {% if issue.image %}
                                        <img src="{{ issue.image.url }}" alt="Image for {{ issue.title }}" class="issue-image" width="100">
                                    {% else %}
                                        No Image
                                    {% endif %}
                                </td>
                                
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>No issues reported yet. Be the first to report an issue!</p>
            {% endif %}
        </div>
    </div>
    
    <!-- Optional: Additional CSS for issue images -->
    <style>
        .issue-image {
            max-width: 100px;
            max-height: 100px;
            object-fit: cover;
        }
    </style>

</body>
</html>
